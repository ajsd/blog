/*! blog - v0.0.0 - 2013-07-06
* Copyright (c) 2013 arunjit; Licensed  */
!function(){"use strict";function a(a){var b=a.newService("blog");this.search=b.createMethod("Search")}function b(a,b){a.entries=[],b.search({q:"*"}).success(function(b){a.entries=b.entries})}var c=angular.module("angular-markdown",[]);c.directive("markdown",function(){var a=new Showdown.converter;return{restrict:"E",require:"?ngModel",link:function(b,c,d,e){var f=d.extensions,g=!1;if(f){var h=[];f.split(",").forEach(function(a){h.push(a.replace(/^\s+|\s+$/g,""))}),h.indexOf("prettify")>=0&&(g=!0),a=new Showdown.converter({extensions:h})}var i=d.strip;i="true"==String(i).toLowerCase()?!0:!1;var j=function(){var b="",f="";d.ngModel?e.$modelValue&&(f=e.$modelValue):f=c.text(),i&&(f=f.replace(/^[ /t]+/g,"").replace(/\n[ /t]+/g,"\n")),b=a.makeHtml(f),c.html(b),g&&prettyPrint()};d.ngModel&&b.$watch(d.ngModel,j),j()}}}),!function(){function a(){this.uuidFmt="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"}function b(){var a=this.defaults={};a.rpcPath_="/rpc",this.$get=["$http","uuid",function(b,c){function d(d,e){var f=c.next(),g={jsonrpc:"2.0",method:d.method,id:f};angular.isDefined(d.data)&&(g.params=d.data);var h=[];return angular.forEach(b.defaults.transformResponse,function(a){h.push(a)}),h.push(function(a){return a.id==f?a.result||a.error:null}),e=e||{},angular.isArray(e.transformResponse)?[].push.apply(h,e.transformResponse):angular.isFunction(e.transformResponse)&&h.push(e.transformResponse),e.transformResponse=h,b.post(d.path||a.rpcPath_,g,e)}function e(a){this.serviceName=a}return d.request=function(a,b,c){return d({method:a,data:b},c)},d.requestPath=function(a,b,c,e){return d({path:a,method:b,data:c},e)},e.prototype.createMethod=function(a,b){var c=this.serviceName+"."+a;return function(a){return d.request(c,a,b)}},d.newService=function(a){return new e(a)},d}]}a.prototype.next=function(){return this.uuidFmt.replace(/[xy]/g,function(a){var b=0|16*Math.random(),c="x"==a?b:8|3&b;return c.toString(16)})},b.prototype.setBasePath=function(a){this.defaults.rpcPath_=a},angular.module("jsonrpc",[]).service("uuid",a).provider("jsonrpc",b)}(),a.$inject=["jsonrpc"],b.$inject=["$scope","blogService"];var d=angular.module("main",["angular-markdown","jsonrpc"]);d.constant("serverHost",window.location.href.indexOf("localhost")>-1?"http://localhost:8080":"https://arunjit-goblog.appspot.com"),d.config(["$routeProvider","$locationProvider","jsonrpcProvider","serverHost",function(a,b,c,d){c.setBasePath(d+"/rpc"),b.html5Mode(!1),a.when("/",{templateUrl:"views/entries.html",controller:"EntriesCtrl"}).when("/writer",{templateUrl:"views/writer.html"}).otherwise({redirectTo:"/"})}]),d.run(["$rootScope","serverHost",function(a,b){a.serverHost=b,a.baseHref=window.location.href.replace(/\/(?:#\/.+)?$/,"")}]),d.service("blogService",a),d.controller("EntriesCtrl",b)}();